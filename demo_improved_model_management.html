<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ”¹è¿›åçš„æ¨¡å‹ç®¡ç†åŠŸèƒ½æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .header p {
            color: #7f8c8d;
            font-size: 18px;
        }
        .demo-section {
            margin-bottom: 40px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .demo-section h2 {
            color: #34495e;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #bdc3c7;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .feature-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .feature-card p {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }
        .feature-list li:before {
            content: "âœ… ";
            margin-right: 8px;
        }
        .demo-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background-color 0.3s;
        }
        .demo-button:hover {
            background: #2980b9;
        }
        .demo-button.success {
            background: #27ae60;
        }
        .demo-button.warning {
            background: #f39c12;
        }
        .demo-output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-healthy { background-color: #27ae60; }
        .status-warning { background-color: #f39c12; }
        .status-error { background-color: #e74c3c; }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table th {
            background-color: #34495e;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .before { color: #e74c3c; }
        .after { color: #27ae60; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ æ”¹è¿›åçš„æ¨¡å‹ç®¡ç†åŠŸèƒ½æ¼”ç¤º</h1>
            <p>ç»Ÿä¸€ç®¡ç†åµŒå…¥æ¨¡å‹å’Œé‡æ’åºæ¨¡å‹ï¼Œæä¾›å®Œæ•´çš„ç›‘æ§å’Œé…ç½®åŠŸèƒ½</p>
        </div>

        <div class="demo-section">
            <h2>ğŸ“‹ åŠŸèƒ½æ¦‚è§ˆ</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>ğŸ¯ ç»Ÿä¸€ç®¡ç†</h3>
                    <p>åœ¨ä¸€ä¸ªç•Œé¢ç®¡ç†æ‰€æœ‰æ¨¡å‹</p>
                    <ul class="feature-list">
                        <li>åµŒå…¥æ¨¡å‹é…ç½®</li>
                        <li>é‡æ’åºæ¨¡å‹é…ç½®</li>
                        <li>ç»Ÿä¸€å¹³å°è®¾ç½®</li>
                        <li>æ´»è·ƒæ¨¡å‹åˆ‡æ¢</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>ğŸ“Š å®æ—¶ç›‘æ§</h3>
                    <p>å…¨é¢çš„çŠ¶æ€å’Œæ€§èƒ½ç›‘æ§</p>
                    <ul class="feature-list">
                        <li>æ¨¡å‹çŠ¶æ€ç›‘æ§</li>
                        <li>æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡</li>
                        <li>å¥åº·çŠ¶æ€æ£€æŸ¥</li>
                        <li>å®æ—¶æ•°æ®æ›´æ–°</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>ğŸ”„ åŠ¨æ€é…ç½®</h3>
                    <p>è¿è¡Œæ—¶é…ç½®å’Œæ¨¡å‹åˆ‡æ¢</p>
                    <ul class="feature-list">
                        <li>çƒ­åˆ‡æ¢æ¨¡å‹</li>
                        <li>é…ç½®å³æ—¶ç”Ÿæ•ˆ</li>
                        <li>è‡ªåŠ¨ä¿å­˜é…ç½®</li>
                        <li>é…ç½®ç‰ˆæœ¬ç®¡ç†</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>ğŸ›¡ï¸ é”™è¯¯å¤„ç†</h3>
                    <p>å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ</p>
                    <ul class="feature-list">
                        <li>å‹å¥½çš„é”™è¯¯æç¤º</li>
                        <li>è‡ªåŠ¨é‡è¯•æœºåˆ¶</li>
                        <li>è¯¦ç»†çš„æ—¥å¿—è®°å½•</li>
                        <li>çŠ¶æ€æ¢å¤åŠŸèƒ½</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>ğŸ§ª åŠŸèƒ½æ¼”ç¤º</h2>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ä½“éªŒå„é¡¹åŠŸèƒ½ï¼ˆéœ€è¦åç«¯æœåŠ¡è¿è¡Œï¼‰</p>
            
            <div style="margin-bottom: 20px;">
                <button class="demo-button" onclick="testModelStatus()">ğŸ“Š è·å–æ¨¡å‹çŠ¶æ€</button>
                <button class="demo-button" onclick="testModelMetrics()">ğŸ“ˆ æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡</button>
                <button class="demo-button success" onclick="testModelSwitch()">ğŸ”„ åˆ‡æ¢æ¨¡å‹</button>
                <button class="demo-button warning" onclick="testHealthCheck()">ğŸ¥ å¥åº·æ£€æŸ¥</button>
            </div>

            <div id="demo-output" class="demo-output">
                ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®å¼€å§‹æ¼”ç¤º...
            </div>
        </div>

        <div class="demo-section">
            <h2>ğŸ“ˆ æ”¹è¿›å¯¹æ¯”</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>åŠŸèƒ½æ–¹é¢</th>
                        <th>æ”¹è¿›å‰</th>
                        <th>æ”¹è¿›å</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>æ¨¡å‹ç®¡ç†</strong></td>
                        <td class="before">âŒ åˆ†æ•£åœ¨ä¸åŒé¡µé¢</td>
                        <td class="after">âœ… ç»Ÿä¸€ç®¡ç†ç•Œé¢</td>
                    </tr>
                    <tr>
                        <td><strong>é…ç½®æ–¹å¼</strong></td>
                        <td class="before">âŒ æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶</td>
                        <td class="after">âœ… å¯è§†åŒ–é…ç½®ç•Œé¢</td>
                    </tr>
                    <tr>
                        <td><strong>çŠ¶æ€ç›‘æ§</strong></td>
                        <td class="before">âŒ ç¼ºå°‘å®æ—¶çŠ¶æ€</td>
                        <td class="after">âœ… å®æ—¶çŠ¶æ€ç›‘æ§</td>
                    </tr>
                    <tr>
                        <td><strong>æ¨¡å‹åˆ‡æ¢</strong></td>
                        <td class="before">âŒ éœ€è¦é‡å¯æœåŠ¡</td>
                        <td class="after">âœ… åŠ¨æ€çƒ­åˆ‡æ¢</td>
                    </tr>
                    <tr>
                        <td><strong>é”™è¯¯å¤„ç†</strong></td>
                        <td class="before">âŒ é”™è¯¯ä¿¡æ¯ä¸æ˜ç¡®</td>
                        <td class="after">âœ… å‹å¥½çš„é”™è¯¯æç¤º</td>
                    </tr>
                    <tr>
                        <td><strong>ç”¨æˆ·ä½“éªŒ</strong></td>
                        <td class="before">âŒ æ“ä½œå¤æ‚</td>
                        <td class="after">âœ… ç®€å•ç›´è§‚</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="demo-section">
            <h2>ğŸ¯ ä½¿ç”¨æŒ‡å—</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h3>åŸºç¡€é…ç½®æ­¥éª¤</h3>
                    <ol style="line-height: 2;">
                        <li>æ‰“å¼€ç³»ç»Ÿè®¾ç½®é¡µé¢</li>
                        <li>ç‚¹å‡»"æ¨¡å‹é…ç½®"é€‰é¡¹å¡</li>
                        <li>é…ç½®æ¨¡å‹å¹³å°ä¿¡æ¯</li>
                        <li>è®¾ç½®åµŒå…¥æ¨¡å‹å‚æ•°</li>
                        <li>é…ç½®é‡æ’åºæ¨¡å‹</li>
                        <li>ä¿å­˜é…ç½®</li>
                    </ol>
                </div>
                <div>
                    <h3>é«˜çº§åŠŸèƒ½ä½¿ç”¨</h3>
                    <ol style="line-height: 2;">
                        <li>æŸ¥çœ‹æ¨¡å‹çŠ¶æ€å’ŒæŒ‡æ ‡</li>
                        <li>æ‰§è¡Œå¥åº·æ£€æŸ¥</li>
                        <li>åŠ¨æ€åˆ‡æ¢æ´»è·ƒæ¨¡å‹</li>
                        <li>ç›‘æ§æ€§èƒ½æ•°æ®</li>
                        <li>å¤„ç†å¼‚å¸¸æƒ…å†µ</li>
                        <li>ä¼˜åŒ–é…ç½®å‚æ•°</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>ğŸ”§ æŠ€æœ¯æ¶æ„</h2>
            <div style="text-align: center; margin: 30px 0;">
                <div style="display: inline-block; padding: 20px; background: #ecf0f1; border-radius: 10px;">
                    <div style="margin-bottom: 20px;">
                        <strong>å‰ç«¯æ¶æ„</strong><br>
                        Settings Page â†’ ModelManager â†’ API Client â†’ UI Components
                    </div>
                    <div style="margin-bottom: 20px;">
                        <strong>åç«¯æ¶æ„</strong><br>
                        Config API Router â†’ Model Management â†’ Configuration Storage
                    </div>
                    <div>
                        <strong>æ•°æ®æµ</strong><br>
                        ç”¨æˆ·æ“ä½œ â†’ å‰ç«¯å¤„ç† â†’ APIè°ƒç”¨ â†’ åç«¯å¤„ç† â†’ é…ç½®æ›´æ–° â†’ çŠ¶æ€åŒæ­¥
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>ğŸ‰ æ€»ç»“</h2>
            <p>é€šè¿‡è¿™æ¬¡æ”¹è¿›ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ï¼š</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>ğŸ¯ ç›®æ ‡è¾¾æˆ</h3>
                    <p>å°†åµŒå…¥æ¨¡å‹å’Œé‡æ’åºæ¨¡å‹æ•´åˆåˆ°ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢ï¼Œå¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒå’Œç®¡ç†æ•ˆç‡ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>ğŸš€ æŠ€æœ¯æå‡</h3>
                    <p>å»ºç«‹äº†å®Œæ•´çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›äº†ä¸°å¯Œçš„APIæ¥å£å’Œå®æ—¶ç›‘æ§åŠŸèƒ½ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>ğŸ’¡ ç”¨æˆ·ä½“éªŒ</h3>
                    <p>ç®€åŒ–äº†æ“ä½œæµç¨‹ï¼Œæä¾›äº†ç›´è§‚çš„ç•Œé¢å’Œå‹å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>ğŸ”® æœªæ¥æ‰©å±•</h3>
                    <p>ä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šäº†è‰¯å¥½åŸºç¡€ï¼Œæ”¯æŒæ›´å¤šæ¨¡å‹æä¾›å•†å’Œé«˜çº§åŠŸèƒ½ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const output = document.getElementById('demo-output');
            const timestamp = new Date().toLocaleTimeString();
            const typeIcon = {
                'info': 'â„¹ï¸',
                'success': 'âœ…',
                'error': 'âŒ',
                'warning': 'âš ï¸'
            };
            
            output.innerHTML += `[${timestamp}] ${typeIcon[type]} ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }

        async function testModelStatus() {
            log('å¼€å§‹è·å–æ¨¡å‹çŠ¶æ€...', 'info');
            
            try {
                const response = await fetch('http://localhost:8000/config/models/status');
                
                if (response.ok) {
                    const data = await response.json();
                    log('æ¨¡å‹çŠ¶æ€è·å–æˆåŠŸï¼', 'success');
                    log(`æ‰¾åˆ° ${Object.keys(data.data?.model_configs || {}).length} ä¸ªæ¨¡å‹é…ç½®`, 'info');
                    
                    if (data.data?.active_models) {
                        const activeModels = data.data.active_models;
                        log(`æ´»è·ƒåµŒå…¥æ¨¡å‹: ${activeModels.embedding || 'æœªè®¾ç½®'}`, 'info');
                        log(`æ´»è·ƒé‡æ’åºæ¨¡å‹: ${activeModels.reranking || 'æœªè®¾ç½®'}`, 'info');
                    }
                } else {
                    log(`APIè°ƒç”¨å¤±è´¥: HTTP ${response.status}`, 'error');
                }
            } catch (error) {
                log(`è¿æ¥å¤±è´¥: ${error.message}`, 'error');
                log('è¯·ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ (http://localhost:8000)', 'warning');
            }
        }

        async function testModelMetrics() {
            log('å¼€å§‹è·å–æ€§èƒ½æŒ‡æ ‡...', 'info');
            
            try {
                const response = await fetch('http://localhost:8000/config/models/metrics');
                
                if (response.ok) {
                    const data = await response.json();
                    log('æ€§èƒ½æŒ‡æ ‡è·å–æˆåŠŸï¼', 'success');
                    
                    if (data.data?.embedding_metrics) {
                        const metrics = data.data.embedding_metrics;
                        log(`åµŒå…¥æ¨¡å‹ - æ€»è¯·æ±‚: ${metrics.total_requests}, æˆåŠŸç‡: ${metrics.success_rate}%`, 'info');
                    }
                    
                    if (data.data?.reranking_metrics) {
                        const metrics = data.data.reranking_metrics;
                        log(`é‡æ’åºæ¨¡å‹ - æ€»è¯·æ±‚: ${metrics.total_requests}, æˆåŠŸç‡: ${metrics.success_rate}%`, 'info');
                    }
                } else {
                    log(`APIè°ƒç”¨å¤±è´¥: HTTP ${response.status}`, 'error');
                }
            } catch (error) {
                log(`è¿æ¥å¤±è´¥: ${error.message}`, 'error');
            }
        }

        async function testModelSwitch() {
            log('å¼€å§‹æµ‹è¯•æ¨¡å‹åˆ‡æ¢...', 'info');
            
            try {
                const switchData = {
                    model_type: 'embedding',
                    model_name: 'text-embedding-ada-002'
                };
                
                const response = await fetch('http://localhost:8000/config/models/switch-active', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(switchData)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        log('æ¨¡å‹åˆ‡æ¢æˆåŠŸï¼', 'success');
                        log(`å·²åˆ‡æ¢åˆ°: ${switchData.model_name}`, 'info');
                    } else {
                        log(`åˆ‡æ¢å¤±è´¥: ${data.error}`, 'error');
                    }
                } else {
                    log(`APIè°ƒç”¨å¤±è´¥: HTTP ${response.status}`, 'error');
                }
            } catch (error) {
                log(`è¿æ¥å¤±è´¥: ${error.message}`, 'error');
            }
        }

        async function testHealthCheck() {
            log('å¼€å§‹æ‰§è¡Œå¥åº·æ£€æŸ¥...', 'info');
            
            try {
                const response = await fetch('http://localhost:8000/config/models/health-check', {
                    method: 'POST'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        log('å¥åº·æ£€æŸ¥å®Œæˆï¼', 'success');
                        log(`æ•´ä½“çŠ¶æ€: ${data.overall_status}`, 'info');
                        
                        if (data.details) {
                            Object.entries(data.details).forEach(([component, health]) => {
                                const status = health.status === 'healthy' ? 'âœ…' : 
                                             health.status === 'unhealthy' ? 'âŒ' : 'âš ï¸';
                                log(`${component}: ${status} ${health.message} (${health.latency}ms)`, 'info');
                            });
                        }
                    } else {
                        log(`å¥åº·æ£€æŸ¥å¤±è´¥: ${data.error}`, 'error');
                    }
                } else {
                    log(`APIè°ƒç”¨å¤±è´¥: HTTP ${response.status}`, 'error');
                }
            } catch (error) {
                log(`è¿æ¥å¤±è´¥: ${error.message}`, 'error');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('æ¨¡å‹ç®¡ç†åŠŸèƒ½æ¼”ç¤ºé¡µé¢å·²åŠ è½½', 'success');
            log('ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹ä½“éªŒå„é¡¹åŠŸèƒ½', 'info');
            log('æ³¨æ„: éœ€è¦åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:8000', 'warning');
        });
    </script>
</body>
</html>